---

layout: default

---

    <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

      <header class="post-header">
        <h1 id="title" class="post-title p-name" itemprop="name headline">
          <span id="htmlTitle" onclick="this.contentEditable = 'true'; this.classList.add('comment-box')" this.classList.remove('comment-box')" contenteditable="true">Error 404</span>
        </h1>

        <div id="htmlSubtitle" onclick="this.contentEditable = 'true'; this.classList.add('comment-box')" this.classList.remove('comment-box')" contenteditable="true" class="sub-title">Page not Found</div><span class="post-meta">
<span class="dt-published" datetime="2019-07-13T00:00:00+00:00" itemprop="datePublished">Last updated Sat, 13 Jul, 2019
</span></span>

      </header>

      <div id="htmlBody" onclick="this.contentEditable = 'true'; this.classList.add('comment-box')" this.classList.remove('comment-box')" contenteditable="true" class="post-content e-content" itemprop="articleBody">

        hello

      </div>
    </article>

    <script type="module">

    // Get pageName = gyanl.com/string

    var pageName = location.pathname.substring(location.pathname.lastIndexOf("/") + 1);
    console.log(pageName);

    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.0.2/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.0.2/firebase-analytics.js";
    import { getDatabase, ref, set, child, get, onValue } from "https://www.gstatic.com/firebasejs/9.0.2/firebase-database.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyCLkh1I6haUU51EslRGSlXkXiYqOkvcCKA",
      authDomain: "idea-cbd6c.firebaseapp.com",
      databaseURL: "https://idea-cbd6c-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "idea-cbd6c",
      storageBucket: "idea-cbd6c.appspot.com",
      messagingSenderId: "965624401030",
      appId: "1:965624401030:web:accca7b65fddd344591507",
      measurementId: "G-CVF81V77DF"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const db = getDatabase();


    var vtitle = document.getElementById('htmlTitle');
    var vsubtitle = document.getElementById('htmlSubtitle');
    var vbody = document.getElementById('htmlBody');


    function updateValues() {
      const updates = {};
      updates[pageName + "/"] = {
        title: vtitle.innerHTML,
        subtitle: vsubtitle.innerHTML,
        body: vbody.innerHTML
      };
      update(ref(db), updates);
    }

    vtitle.addEventListener("blur", updateValues());
    vsubtitle.addEventListener("blur", updateValues());
    vbody.addEventListener("blur", updateValues());


    function renderPage(){

      const starCountRef = ref(db, pageName + '/');
      onValue(starCountRef, (snapshot) => {

        // If snapshot exists, get the values and populate the page.
        if (snapshot.exists()) {
          console.log(snapshot.val());
          vtitle.innerHTML = snapshot.val().title;
          vsubtitle.innerHTML = snapshot.val().subtitle;
          vbody.innerHTML = snapshot.val().body;
        } else {
        // If no snapshot, fill values and create record.
          console.log("Creating new record.");
          vtitle.innerHTML = pageName;
          vsubtitle.innerHTML = "What is this page about?";
          vbody.innerHTML = "There is nothing on this page right now. Maybe you should write something?";

          // Create new log
          set(ref(db, pageName + "/"), {
            title: vtitle.innerHTML,
            subtitle: vsubtitle.innerHTML,
            body : vbody.innerHTML
          });
        }
      });


    }
    renderPage();

    </script>
